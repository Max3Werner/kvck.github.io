{% extends "admin/base.html" %}

{% block title %}Dashboard{% endblock %}
{% block page_title %}Dashboard{% endblock %}

{% block content %}
<!-- Stats -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">ðŸ“…</div>
        <div class="stat-value">{{ stats.events }}</div>
        <div class="stat-label">KalenderhÃ¤ndelser</div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">ðŸ“–</div>
        <div class="stat-value">{{ stats.stories }}</div>
        <div class="stat-label">ReseberÃ¤ttelser</div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">ðŸ“¸</div>
        <div class="stat-value">{{ stats.photos }}</div>
        <div class="stat-label">Foton</div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">ðŸ‘¥</div>
        <div class="stat-value">{{ stats.members }}</div>
        <div class="stat-label">Medlemmar</div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">ðŸ“°</div>
        <div class="stat-value">{{ stats.news }}</div>
        <div class="stat-label">Nyheter</div>
    </div>
</div>

<!-- Quick Actions -->
<div class="card" style="margin-bottom: 2rem;">
    <div class="card-header">
        <h2 class="card-title">SnabbÃ¥tgÃ¤rder</h2>
    </div>
    <div class="card-body" style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <a href="{{ url_for('admin.news_create') }}" class="btn btn-primary">ðŸ“° Ny nyhet</a>
        <a href="{{ url_for('admin.events_create') }}" class="btn btn-primary">ðŸ“… Nytt evenemang</a>
        <a href="{{ url_for('admin.stories_create') }}" class="btn btn-primary">ðŸ“– Ny berÃ¤ttelse</a>
        <a href="{{ url_for('admin.photos_upload') }}" class="btn btn-primary">ðŸ“¸ Ladda upp foton</a>
    </div>
</div>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 1.5rem;">
    <!-- Recent News -->
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">Senaste nyheter</h2>
            <a href="{{ url_for('admin.news_list') }}" class="btn btn-secondary btn-sm">Visa alla</a>
        </div>
        <div class="card-body">
            {% if recent_news %}
                {% for news in recent_news %}
                <div style="padding: 0.75rem 0; border-bottom: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div>
                            <strong>{{ news.title }}</strong>
                            <div style="font-size: 0.8125rem; color: var(--text-muted);">
                                {{ news.created_at.strftime('%Y-%m-%d') }}
                            </div>
                        </div>
                        {% if news.is_published %}
                            <span class="badge badge-success">Publicerad</span>
                        {% else %}
                            <span class="badge badge-warning">Utkast</span>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p style="color: var(--text-muted); text-align: center; padding: 2rem;">Inga nyheter Ã¤nnu</p>
            {% endif %}
        </div>
    </div>

    <!-- Recent Events -->
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">Senaste hÃ¤ndelser</h2>
            <a href="{{ url_for('admin.events_list') }}" class="btn btn-secondary btn-sm">Visa alla</a>
        </div>
        <div class="card-body">
            {% if recent_events %}
                {% for event in recent_events %}
                <div style="padding: 0.75rem 0; border-bottom: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div>
                            <strong>{{ event.title }}</strong>
                            <div style="font-size: 0.8125rem; color: var(--text-muted);">
                                {{ event.date.strftime('%Y-%m-%d %H:%M') }} - {{ event.location or 'Ingen plats' }}
                            </div>
                        </div>
                        <span class="badge badge-info">{{ event.event_type }}</span>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p style="color: var(--text-muted); text-align: center; padding: 2rem;">Inga hÃ¤ndelser Ã¤nnu</p>
            {% endif %}
        </div>
    </div>

    <!-- Recent Stories -->
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">Senaste berÃ¤ttelser</h2>
            <a href="{{ url_for('admin.stories_list') }}" class="btn btn-secondary btn-sm">Visa alla</a>
        </div>
        <div class="card-body">
            {% if recent_stories %}
                {% for story in recent_stories %}
                <div style="padding: 0.75rem 0; border-bottom: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div>
                            <strong>{{ story.title }}</strong>
                            <div style="font-size: 0.8125rem; color: var(--text-muted);">
                                av {{ story.author.display_name or story.author.username }}
                            </div>
                        </div>
                        {% if story.is_published %}
                            <span class="badge badge-success">Publicerad</span>
                        {% else %}
                            <span class="badge badge-warning">Utkast</span>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p style="color: var(--text-muted); text-align: center; padding: 2rem;">Inga berÃ¤ttelser Ã¤nnu</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% extends "admin/base.html" %}

{% block title %}Nyheter{% endblock %}
{% block page_title %}Nyheter{% endblock %}

{% block top_actions %}
<a href="{{ url_for('admin.news_create') }}" class="btn btn-primary">+ Ny nyhet</a>
{% endblock %}

{% block content %}
<div class="card">
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Titel</th>
                    <th>FÃ¶rfattare</th>
                    <th>Status</th>
                    <th>Utvald</th>
                    <th>Skapad</th>
                    <th>Ã…tgÃ¤rder</th>
                </tr>
            </thead>
            <tbody>
                {% for item in news %}
                <tr>
                    <td>
                        <div style="display: flex; align-items: center; gap: 0.75rem;">
                            {% if item.image_url %}
                                <img src="{{ item.image_url }}" class="image-preview" style="width: 48px; height: 48px;" alt="">
                            {% endif %}
                            <div>
                                <strong>{{ item.title }}</strong>
                                {% if item.excerpt %}
                                    <br><small style="color: var(--text-muted);">{{ item.excerpt[:60] }}...</small>
                                {% endif %}
                            </div>
                        </div>
                    </td>
                    <td>{{ item.author.display_name or item.author.username }}</td>
                    <td>
                        {% if item.is_published %}
                            <span class="badge badge-success">Publicerad</span>
                        {% else %}
                            <span class="badge badge-warning">Utkast</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if item.is_featured %}
                            <span class="badge badge-info">Utvald</span>
                        {% endif %}
                    </td>
                    <td>{{ item.created_at.strftime('%Y-%m-%d') }}</td>
                    <td>
                        <div class="table-actions">
                            <a href="{{ url_for('admin.news_edit', id=item.id) }}" class="btn btn-secondary btn-sm">Redigera</a>
                            <form action="{{ url_for('admin.news_delete', id=item.id) }}" method="POST" style="display: inline;" onsubmit="return confirm('Ã„r du sÃ¤ker pÃ¥ att du vill ta bort denna nyhet?');">
                                <button type="submit" class="btn btn-danger btn-sm">Ta bort</button>
                            </form>
                        </div>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="6">
                        <div class="empty-state">
                            <div class="empty-state-icon">ðŸ“°</div>
                            <p class="empty-state-text">Inga nyheter Ã¤nnu</p>
                            <a href="{{ url_for('admin.news_create') }}" class="btn btn-primary">Skapa fÃ¶rsta nyheten</a>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
